{% load i18n %}
{% load filters %}
{% load static %}

<div class="user-panel mt-3 pb-3 mb-3 d-flex">
  <nav class="mt-2" style="width:100%">
    <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu">
      <small><p class="category">Dashboard</p></small>
      <li class="nav-item" style="margin-left:10%;">
        <div class="form-check form-switch">
          <input 
            class="form-check-input"
            type="checkbox"
            id="sprintSwitch"
            {% if request.GET.dashboard == 'sprint' %}checked{% endif %}
            onchange="toggleSprint(this)">
          <label class="form-check-label" for="sprintSwitch" style="color:white;">
            Sprint IMDC
          </label>
        </div>
      </li>
    </ul>
  </nav>
</div>

<div class="user-panel mt-3 pb-3 mb-3 d-flex">
  <div style="width:100%">
    <small><p class="category">Tags</p></small>
    <div id="tags-list" class="tags-container"></div>
  </div>
</div>

<script type="text/javascript" src="{% static 'js/external/jquery.js' %}"></script>
<script>
function toggleSprint(el) {
  const params = new URLSearchParams(window.location.search);
  if (el.checked) {
    params.set('dashboard', 'sprint');
  } else {
    params.delete('dashboard');
  }
  window.location.search = params.toString();
}
</script>

<style>
.nav-link {
  width: 100%;
  text-align: start;
}

.nav-link.active {
  background-color: #6976B7 !important;
}

.nav-text {
  color: lightgray;
}

.category {
  margin-bottom: 0;
  color: gray;
}

.tags-container {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
}

.tag-balloon {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 999px;
  background-color: #f4f4f4;
  color: #333;
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.3s ease;
  user-select: none;
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.tag-balloon.active {
  background-color: #007bff;
  color: #fff;
}
</style>
