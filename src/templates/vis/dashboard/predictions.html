{% extends 'vis/dashboard/base.html' %}
{% load static %}
{% load i18n %}

{% block title %}Dashboard - Predictions{% endblock %}

{% block content %}
<div class="row">
  {{models}}
  <div class="col-md-6">
    <div id="models-card" class="card">
      <div class="card-header">
        <h3 class="card-title">Models</h3>
        <div class="card-tools">
          <div class="input-group input-group-sm" style="width: 200px;">
            <input type="text" name="models-search" class="form-control float-right" placeholder="Search">

            <div class="input-group-append">
              <button type="submit" class="btn btn-default">
                <i class="fas fa-search"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="card-body" style="margin:0;padding:0;">
        <table id="models-list" class="table table-bordered table-hover">
        </table>
      </div>
      <div class="card-footer clearfix">
        <ul id="models-pagination" class="pagination pagination-sm m-0 float-right"></ul>
      </div>
    </div>
  </div>


  <div class="col-md-6">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Predictions</h3>
        <div class="card-tools">
        </div>
      </div>
      <div class="card-body" style="margin:0;padding:0;">
        <table id="predictions-list" class="table table-bordered table-hover">
        </table>
      </div>
      <div class="card-footer clearfix">
        <ul id="predictions-pagination" class="pagination pagination-sm m-0 float-right"></ul>
      </div>
    </div>
  </div>
</div>

<div id="tags-card" class="card">
  <div class="card-header">
    <h3 class="card-title">Tags</h3>
    <div class="card-tools">
      <button type="button" class="btn btn-tool" data-card-widget="collapse">
        <i class="fas fa-chevron-down"></i>
      </button>
    </div>
  </div>
  <div class="card-body">
  </div>
</div>

<div class="card">
  <div id="chart-chard" class="card-body">
    <canvas id="chart" style="min-height: 250px; max-height: 500px; max-width: 100%;"></canvas>
    <div id="date-picker"></div>
  </div>
</div>

<br>
<br>
<br>

<script>
  const dashboard = `{{ dashboard }}`;
  const model_id = `{{ model_id }}` | null;
  const prediction_id = `{{ prediction_id }}` | null;
  const min_window_date = `{{ min_window_date }}`;
  const max_window_date = `{{ max_window_date }}`;

  const all_tags = {{ tags|safe }};
</script>

<style>
.table {
  table-layout: fixed;
}

#tags-card .card-body {
  display: flex;
  gap: 30px;
}

.tag-group {
  display: flex;
  flex-wrap: wrap;
  align-content: flex-start;
  gap: 10px;
}

.tag-btn {
  --btn-color: rgb(124 45 18);
  --btn-bg: rgb(252 211 77);
  max-height: 40px;
  max-width: fit-content;
  position: relative;
  display: inline-flex;
  flex-grow: 0;
  flex-basis: auto;
  align-items: center;
  justify-content: center;
  gap: 6px;
  background-color: var(--btn-bg);
  color: var(--btn-color);
  padding: 14px 22px;
  border-radius: 8px;
  border: 0;
  cursor: pointer;
  font-weight: 600;
  font-size: 1rem;
  font-family: system-ui;
  border: 2px solid var(--btn-color);
  transition: 100ms ease;
  box-shadow: 5px 5px 0 0 var(--btn-color);
}

.tag-btn:hover {
  box-shadow: 2px 2px 0 0 var(--btn-color);
}

.tag-btn:active {
  transition: 50ms ease;
  box-shadow:  0 0 0 0 var(--btn-color);
}

.tag-btn:focus-visible {
  outline: 0;
  --btn-color: #002cc8;
}

.tag-btn:focus-visible::after {
  position: absolute;
  left: 50%;
  top: calc(100% + 12px);
  transform: translateX(-50%);
  content: "\21E7";
  animation: float .5s ease-in-out infinite;
}

@keyframes float {
	0% {
		transform: translateX(-50%) translatey(0px);
	}
	50% {
		transform: translateX(-50%) translatey(-6px);
	}
	100% {
		transform: translateX(-50%) translatey(0px);
	}
}
</style>

<script type="text/javascript" src="{% static 'js/vis/dashboard/predictions.js' %}"></script>
{% endblock %}
