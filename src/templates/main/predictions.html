{% extends 'main/base.html' %}
{% load static %}
{% block title %}Predictions{% endblock %}
{% block content %}

<link rel="stylesheet" type="text/css" href="{% static 'css/main/predictions.css' %}">
<div class="container models shadow p-3 mb-3 bg-body rounded font-golos">
  <h1>Predictions</h1>
  <form method="get" action={% url 'predictions' %}>
    <div class="row mb-3">
      <div class="col">
        <nav aria-label="Page navigation example">
          <label class="form-label">Page</label>
          <ul class="pagination">
            <li class="page-item">
            {% if request.session.page > 1 %}
              <a class="page-link" href="{% url 'predictions' %}{% if request.GET %}?{% endif %}{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ request.session.page|add:-1 }}">Previous</a>
            {% else %}
              <a class="page-link disabled">Previous</a>
            {% endif %}
            </li>
            <input
              type="number"
              class="form-control"
              name="page"
              value="{{ request.session.page }}"
              min="1"
              max="{{ request.session.total_pages }}"
            >
            <li class="page-item">
            {% if request.session.page < request.session.total_pages %}
              <a class="page-link" href="{% url 'predictions' %}{% if request.GET %}?{% endif %}{% for key, value in request.GET.items %}{% if key != 'page' %}{{ key }}={{ value }}&{% endif %}{% endfor %}page={{ request.session.page|add:1 }}">Next</a>
            {% else %}
              <a class="page-link disabled">Next</a>
            {% endif %}
            </li>
          </ul>
        </nav>
      </div>
      <div class="col">
        <label class="form-label">Per page</label>
        <input type="number" class="form-control" name="per_page" value="{{ request.session.per_page }}">
      </div>
      <div class="col">
        <label class="form-label">ID</label>
        <input type="number" class="form-control" name="id" value="{{ request.session.id }}">
      </div>
      <div class="col">
        <label class="form-label">Model ID</label>
        <input type="number" class="form-control" name="model_id" value="{{ request.session.model_id }}">
      </div>
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
  </form>

  <!-- Display the search results here -->
  <br></br>
  <p>API URL: {{api_url}}</p>
  <p>Message: {{message}}</p>
  <p>Pagination: {{pagination}}</p>
  <br></br>
  <h4>Search Results:</h4>
  <ul>
    {% for prediction in predictions %}
    <li>{{ prediction }}</li>
    {% endfor %}
  </ul>
</div>

  {% endblock %}
